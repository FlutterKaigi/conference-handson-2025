# FlutterKaigi 2025 ハンズオン・ドキュメント

現時点のドキュメントは、作りかけです。
----------

## はじめに
FlutterKaigi 2025 ハンズオンのメインテーマは、 **「魅力のある UIを作る」** です。  
アプリの魅力を上げるため、UI にアニメーションやデコレーションを追加する基礎知識を学んでもらうことになりました。  

そしてこのハンズオンでは、単なる UI Widget カタログにならないよう、アプリ開発を模した体験になるよう、  
単純で飾り気のないベース模擬アプリに、デコレーションやアニメーションを追加していくという、  
**「ベースUIと カスタムUIのコードや見栄えの比較ができる」** ことをサブテーマとしています。

またアプリのコンセプトは、**読書支援** としました。

これらから、アイテムの状態や状態変更に応じたアクションを返してはくれますが、 単純で飾り気のない模擬アプリの  
**ベースUIコード** を残したまま、デコレーションやアニメーションを盛り込んだ **カスタムUIコード** を併設＆切替可能に  
することで、コードやアプリ表現力向上の比較と これらの違いを学んでもらう趣向となっております。  

- _読了ページ更新と進捗グラフ（ベース表現） ⇒ アニメーション＋デコレーション表現_
  <img width="800" alt="読了ページと進捗グラフ" src="./images/hands-on_sample_1.png" />

- 読了ページ更新の進捗達成リアクション表現（ベース表現） ⇒ アニメーション＋デコレーション表現  
  <img width="800" alt="読了ページ進捗達成のリアクション" src="./images/hands-on_sample_2.png" />


----------

## アプリ構想

アプリのコンセプトは、**読書支援** としたことを受け、

コンセプトのシチュエーションに従って `読書支援したい書籍の追加` や `読書中書籍の一覧表示` に、  
`読了ページの更新とそのタイミングでの進捗達成報告` や `読書進捗状況のグラフ表示`、さらにできれば  
アラーム設定など `何らかのタイミングでの激励や一喝` ができる **模擬アプリ** を作ることにしました。

これらを行うには、`管理したい書籍の追加など`を行う **設定画面（SettingsPage）** や、  
`読書中書籍の一覧表示`や`タップした書籍の選択`ができる **ホーム画面（HomePage）** と、  
`選択された書籍の情報を更新`する **書籍編集画面（ReadingBookPage）** に、  
`読了したページの進捗を可視化`する **グラフ表示画面（ReadingBookGraphPage）** を設け、  
`読書進捗率の達成ごとにメッセージをオーバラップ表示`させる、**アニメーション機能** を盛り込むことで、

単なるウィジェット・カタログにならないよう、ハンズオンに参加してくださるみなさんが実際に触ってみられること、  
リアルタイムでカスタム UIが表示され、読了ページの更新に伴ったリアクションや画面遷移ができることを目指します。

さらにこれら、書籍の新規追加や 読書中書籍の一覧表示、および選択された書籍の編集や削除のテストも追加したいものです。

...とはいえ実際に書籍情報を DBに永続化させたり、イベント管理のためにタイマーやバックグラウンドサービスを導入すると、  
コードやロジックが複雑になり、目的である `シンプルなベースUIコードとリッチなカスタムUIコードとの対比` の妨げになりますから、  
**導入するプラグインは、基本的な状態管理や画面遷移に留める** ことなどの制限をいれました。

- 【参照】アプリ要件初期稿 - [ハンズオン・アプリ要件](reference_documents/requirements.md)

----------

## 模擬アプリとしてのハンズオン・プロジェクト

1. 実装詳細を理解してもらうためコード生成を使わない。  
2. 画面遷移に `go_router`、状態管理に `riverpod` を使い、不変状態値には `freezed を使わない愚直実装` を行う。  
3. 読書管理する書籍の新規追加や情報編集と削除の Unit test と Widget test を利用した簡易結合テストを実装する。  
4. 模擬アプリのため、読書中書籍情報の永続化やアラームは利用しない。このため擬似的に挙動を起こすようにする。  

### システム設計

### アーキテクチャ設計

### フィーチャー設計


- 【参照】プロンプト設計初期稿 - [Agent 指示プロンプト・メモ](reference_documents/prompt_memo.md)

----------

## ベースUI とカスタムUI のコードや見栄えの比較ができる工夫

### ConsumerStagedWidget

### バレルファイル

----------

## ハンズオン開発環境を作ろう。

ここまで、**FlutterKaigi 2025 ハンズオン** と **ハンズオン・リポジトリ（ハンズオン・プロジェクト）** の説明をいたしました。

ここからは、**ハンズオンに参加してくださったみなさまの作業** について説明させていただきます。  

_**〜 この「ハンズオン開発環境を作ろう。」章は、ただいま作成作業中です。 〜**_

### ハンズオン環境構築

----------

## ベースUI を見てみよう。

ハンズオン・プロジェクトの環境構築が済みましたので、まずは手始めにベース UI を確認してみましょう。  

### default バレルファイルを有効にする。

ベースUIのコードファイルは、`lib/src/presentation/ui_widget/default/`ディレクトリに配置されているので、  
**defaultディレクトリのバレルファイル(`lib/src/presentation/ui_widget/default/widget_packages.dart`)** が有効になるよう、  
**UIウィジェット・パッケージ全体のバレルファイル** を修正します。

UIウィジェット・パッケージ全体のバレルファイル [lib/src/presentation/ui_widget/widget_packages.dart](../lib/src/presentation/ui_widget/widget_packages.dart) を開いて、  
デフォルト設定(`default/widget_packages.dart`)の export 行のコメントアウトのみを外して、  
他の export 行がコメントアウトされていることを確認します。  

```dart
// デフォルト設定 （ui_widget/default）
export 'default/widget_packages.dart';

// 完成形設定 （ui_widget/complete）
// export 'complete/widget_packages.dart';

// ハンズオン設定 （ui_widget/challenge）
// export 'challenge/widget_packages.dart';
```
_ハンズオン・リポジトリを Gitクローンしてから、バレルファイルの変更をしていなければ、上記のようになっています。_

### ベースUI を使った機能要件表現を確認する

前ステップで、ui_widget/defaultディレクトリ配下の ベースUIのコードを参照させるようにしました。  
これで模擬アプリを起動すれば、ベースUIによる各種機能要件の表示が行われるようになっています。

- **macOS/Linux 環境の方へ**  
  ターミナルで `make run` を実行して、  
  起動中の iOSシミュレーターや Android エミュレータをデバイスとして選択してください。

- **Windows 環境の方へ**  
  ターミナルで `fvm flutter run` を実行して、  
  起動中の iOSシミュレーターや Android エミュレータをデバイスとして選択してください。

- **補足**  
  - _3.32.8 以上の Flutter SDK が利用できるのであれば、  
    ターミナルで `make run` や `fvm flutter run` を使わなくても、  
    Android Studio のアプリ実行 ⇒ `Run 'main.dart'`が利用可能です。_

  - _ハンズオン・プロジェクトの Flutter実行環境は、iOS/Android の他に Web も有効にしているので、  
    iOS シミュレータや Android エミュレーターでなく、Chromeで動作確認することもできます。_  

_**〜 この「ベースUI を見てみよう。」章は、ただいま作成作業中です。 〜**_

#### 読了したページの更新に伴う進捗率達成メッセージを表示する。

#### 読了したページの進捗をグラフで表示する。

#### 激励や一喝のメッセージを表示する。

### ベースUI コードを確認する。

----------

## カスタムUI を完成させよう。

### challenge バレルファイルを有効にする。

### 穴開きカスタムUI コードを完成させる。

### 完成させたカスタムUI の機能要件表現を確認する。

### ベースUIと カスタムUI のコードを比較してみる。

----------

## 完成版カスタムUI と比較しよう。

### complete バレルファイルを有効にする。

### 完成版カスタムUI の機能要件表現を確認する。

### 完成版カスタムUI コードを確認する。

----------

## 宿題

----------

## お疲れ様でした。

----------
