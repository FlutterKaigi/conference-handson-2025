# ハンズオン・アプリ要件

## **アプリの目的**
FlutterKaigi 2025 ハンズオンのテーマは、アプリの魅力を向上させるカスタム UIとなっています。

これは、ボタンタップなどの UI操作におけるアニメーションを伴ったインタラクションだけでなく、  
アプリからユーザーへの情報通知（イベント通知）においても、アプリの目的に沿って感動や新規性を伴わせた  
ユーザーへのエモーショナルな体験を提供する カスタムUI のアイディアや実装の紹介を目的としています。

このため 単なるカスタム UIのカタログにならないよう、特定の目的を持ったアプリをベースとします。


### **ベース要件**

**読書進捗応援アプリ**  

- 基本機能例：  
  休憩時間等になると自動起動して、読了ページの入力を促し、  
  進捗が 0%, 10%, 50%, 80%, 100% ごとに応援アニメーションをオーバラップ表示します。

- 発展機能例：  
  凝った UIとして、いくつかのパターンの進捗応援アニメーションを表示できるようにする。    
  （サプライズとして、ランダムに遷移アニメーション付きの秘密の画面表示を追加しても良い）

- 画面構成：  
  - 本のタイトルと総ページ数＋読書時間帯を設定する Settingsページと、
  - 現在の読了ページ数＋感想（任意記録）を記録する Readingページを持ちます。


### 読書進捗応援アプリ（UI要件概要）
1. 状況に応じたデザイン変化: アプリの進捗状況に応じてUIが変化すること。

2. インタラクティブ性: ユーザーのアクション（タップ、入力など）に対して、アニメーションで反応すること。

3. テーマ/サイズ対応: Dark/Light テーマ切り替えやテキストサイズ変更に対応し、UIが適切に表示されること。


### UI 要件

- 段階的進捗アニメーションバー (Tiered Progress Animation Bar)
  概要:  
  読書の進捗度合い（0%, 10%, 50%, 80%, 100% など）に応じて、異なる応援アニメーションがオーバーレイ表示されるプログレスバー。  
  アニメーション は、達成度に応じて派手になったり、具体的な要素（紙吹雪、星など）が出現させる。  

  - 関連 Widget/技術:  
    CustomPaint / Canvas: プログレスバー本体とアニメーションの描画。  
    AnimatedOpacity / FadeTransition / ScaleTransition: オーバーレイアニメーションの表示・非表示。  
    TweenAnimationBuilder / AnimationController: 進捗度の変化とアニメーションの制御。

  - インタラクティブな読書統計ドーナツグラフ (Interactive Reading Stats Donut Chart)  
    概要: 本の総ページ数に対する現在の読了ページ数や残りページ数を視覚的に表現するドーナツグラフ。  
    中央には読書時間や目標達成までの残り日数など、重要な統計情報を表示。  
    グラフのセグメントをタップすると、その部分に関連する情報がポップアップ表示されたり、  
    グラフの表示モード（例: 読了率、残りページ率）を切り替える。  

    - 関連 Widget/技術:  
      CustomPaint: ドーナツグラフの描画。  
      GestureDetector: グラフセグメントのタップ検知。  
      Transform.scale / AnimatedContainer: タップ時のセグメント強調アニメーション。

- モーフィング読書記録ボタン (Morphing Reading Log Button)  
  概要: Reading ページで読了ページ数を入力した後に表示される **「記録」ボタン**。  
  記録が完了すると、ボタンがチェックマークや本のアイコンにモーフィング（変形）し、  
  完了を視覚的にフィードバックする。

  - 関連 Widget/技術:  
    CustomPainter: ボタンのシェイプ描画とモーフィングアニメーション。  
    Tween<Path>: シェイプ間のパス補間。  
    AnimationController: アニメーションの制御。  
    AnimatedContainer: ボタンのサイズや色の変化。  

  - 自動起動と促し:  
    休憩時間になると通知または自動的にアプリが起動し、読了ページの入力を促す。


### アプリのページ構成と各 UI の利用シチュエーション
- Settings ページ  
  機能: 本のタイトル、総ページ数、読書時間帯（例: 休憩時間）を設定。

- Reading ページ (メイン)  
  機能: 現在の読了ページ数の入力、感想の記録。そして、読書の進捗状況と応援アニメーションが中心。  

  UI 表現の適用:  
  - 段階的進捗アニメーションバー:  
    ユーザーが読了ページを入力し、「記録」ボタンを押すと、現在の読了率に応じてページ上部にこのプログレスバーを表示。  
    特に、0%, 10%, 50%, 80%, 100% の節目に到達すると、プログレスバー上に豪華な応援アニメーション
    （例: 10%で小さな星が舞う、50%で紙吹雪が降る、100%で大きな達成感を示すアニメーション）をオーバーレイ表示。

  - モーフィング読書記録ボタン:  
    読了ページを入力後、「記録」ボタンをタップすると、ボタンがチェックマークや本を閉じるアイコンなどにモーフィングする。

  - 読書統計ドーナツグラフ:  
    Reading ページのメイン表示として、現在読んでいる本の進捗状況
    （読了ページ数、残りページ数、目標達成までの残り日数など）をドーナツグラフで表示。  
    グラフの中央には「残りXXページ！」や「目標まであとYY日！」といったメッセージが表示され、
    タップすると過去の読書履歴サマリーをポップアップ表示。


### Integration Test 要件
- UI 表現のスナップショット記録:  
  - 各 UI Widget（進捗アニメーションバー、統計ドーナツグラフ、モーフィングボタン）について、
    異なる状態（例: 進捗度合いの変化、ドーナツグラフのデータ変更、ボタンのモーフィング完了状態、
    Dark/Light テーマ適用時）でのスナップショットテストを作成。  

  - golden_toolkit などのパッケージを利用し、期待される UI のスクリーンショットを記録して、
    意図しない UI の変更がないかを自動的に検証。

- イベントのインタラクションテスト:  
  読了ページの入力と「記録」ボタンのタップ、ドーナツグラフのセグメントタップなど、
  ユーザーのインタラクションが期待通りのアニメーションや状態変化を引き起こすことを確認するテストを作成。

